!function o(r,i,a){function s(t,e){if(!i[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},r[t][0].call(n.exports,function(e){return s(r[t][1][e]||e)},n,n.exports,o,r,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){"use strict";var o=e("./autoforms"),r=e("./popupOpen");e("./headerScroll")();e=document.querySelectorAll(".js-form");Array.prototype.slice.call(e,0).forEach(function(e){o.init(e,{Validators:{maskphone:{keys:"1234567890",errorMessage:"Type only numbers",validatorFunction:function(e){return e.valid=e.nodeLink.value.indexOf("_")<0},keypressValidatorFunction:!1}}})}),r()},{"./autoforms":2,"./headerScroll":3,"./popupOpen":4}],2:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){c(this,l),e.empty?(this.message="".concat(e.nodeLink.dataset.name||e.nodeLink.name," is empty"),this.type=101):(this.message=e.autoFormLink.options.Validators[e.type].errorMessage+" "+(e.nodeLink.dataset.name||e.nodeLink.name),"checkbox"!==e.type?this.type=100:this.type=102),this.field=e}var d,u="autoform-invalid",p="autoform-form-invalid",m="autoform-submit-invalid",f="autoform-submit-hovered-once",v="autoforms_errors",y="autoforms_errors",k=["text","password","checkbox","radio","number","color","date","datetime","datetime-local","email","range","search","tel","time","url","month","week"],h=function(){function o(e,t){c(this,o);var n=this;((n.nodeLink=e).autoformField=n).dataOpts=e.dataset,n.type=n.dataOpts.fieldType||(n.nodeLink.attributes.type?n.nodeLink.attributes.type.value:"text"),n.empty=!1,n.valid=!1,n.autoFormLink=t,n.addFieldActions()}return a(o,[{key:"addFieldActions",value:function(){var t,n=this,o=!1,r=!0;n.nodeLink.addEventListener("keyup",function(){return n.autoFormLink.updateState()}),n.nodeLink.addEventListener("change",function(){return n.autoFormLink.updateState()}),n.nodeLink.addEventListener("click",function(){n.autoFormLink.updateState(),this.classList.remove(u)}),n.nodeLink.addEventListener("keypress",function(e){if(13===e.keyCode&&"disabled"!==n.autoFormLink.submit.attributes.disabled&&"TEXTAREA"!==this.tagName&&n.autoFormLink.submit.click(),n.autoFormLink.options.Validators[n.type].keypressValidatorFunction&&(r=n.autoFormLink.options.Validators[n.type].keypressValidatorFunction(n)),n.autoFormLink.options.Validators[n.type].keys?t=n.autoFormLink.options.Validators[n.type].keys.split("").map(function(e){return e.charCodeAt()}).join(" ")+" 8 9 10 13":o=!0,r&&!o&&-1===t.search(e.which))return e.preventDefault(),!1}),n.autoFormLink.options.PositiveValidation&&(n.nodeLink.addEventListener("focusout",function(){n.validate()?(n.nodeLink.classList.add("valid"),n.nodeLink.classList.remove(u)):n.autoFormLink.options.LeaveUnvalidHighlights&&n.autoFormLink.nodeLink.classList.contains(f)&&n.nodeLink.classList.add(u)}),n.nodeLink.addEventListener("focusin",function(){n.nodeLink.classList.remove("valid")}))}},{key:"validate",value:function(e){var t=this;return t.empty=""===t.nodeLink.value,t.empty?!0!==t.dataOpts.required&&void 0!==t.dataOpts.required?t.valid=!0:(t.autoFormLink.errorString="Fill up required fields",t.valid=!1):t.autoFormLink.options.Validators[t.type]&&t.autoFormLink.options.Validators[t.type].validatorFunction?t.valid=t.autoFormLink.options.Validators[t.type].validatorFunction(t):t.valid=!0,t.dataOpts.group&&!e&&(t.valid=t.autoFormLink.validateGroupWithOperator(t.dataOpts.group,t.dataOpts.groupValidateOperator)),t.valid}}]),o}(),L=function(){function r(e,t){c(this,r);var n,o=this;for(n in this.errorStack={validationErrors:[],emptyErrors:[],emptyCheckboxes:[]},this.options={Validators:{text:{keys:"",errorMessage:"Field is empty",validatorFunction:!1,keypressValidatorFunction:!1},password:{keys:"",errorMessage:"Field is empty",validatorFunction:!1,keypressValidatorFunction:!1},"text-all":{keys:"",errorMessage:"Field is empty",validatorFunction:!1,keypressValidatorFunction:!1},"text-url":{keys:'1234567890-=_+qwertyuiop[]asdfghjkl;"zxcvbnm,./QWERTYUIOP{}|ASDFGHJKL:ZXCVBNM<>?',errorMessage:"Type only latin",validatorFunction:!1,keypressValidatorFunction:!1},url:{keys:'1234567890-=_+qwertyuiop[]asdfghjkl;"zxcvbnm,./QWERTYUIOP{}|ASDFGHJKL:ZXCVBNM<>?',errorMessage:"Type only latin",validatorFunction:!1,keypressValidatorFunction:!1},date:{keys:"/.1234567890",errorMessage:"Type only numbers and delimiters",validatorFunction:!1,keypressValidatorFunction:function(e){return e.nodeLink.value.length<10}},phone:{keys:"()+-0123456789()-",errorMessage:"Type only numbers",validatorFunction:!1,keypressValidatorFunction:!1},radio:{keys:"",errorMessage:"Please check one of radiobuttons",validatorFunction:function(e){var t=e.autoFormLink.nodeLink.querySelector('input[name="'.concat(e.nodeLink.getAttribute("name"),'"]:checked'));return!!t&&(void 0!==t.value||!e.dataOpts.required)},keypressValidatorFunction:!1},select:{keys:"",errorMessage:"Select an element in dropdown",validatorFunction:!1,keypressValidatorFunction:!1},email:{keys:"0123456789.@qwertyuiopasdfghjklzxcvbnm-QWERTYUIOPASDFGHJKLZXCVBNM_",errorMessage:"Email is not valid",validatorFunction:function(e){return/\S+\@\S+\.[a-z]+/i.test(e.nodeLink.value)},keypressValidatorFunction:!1},checkbox:{keys:"",errorMessage:"Please select checkbox",validatorFunction:function(e){return!!e.nodeLink.checked||void 0!==e.dataOpts.required},keypressValidatorFunction:!1},number:{keys:"0123456789",errorMessage:"Type only numbers",validatorFunction:!1,keypressValidatorFunction:!1},"email-phone":{keys:"0123456789.@qwertyuiopasdfghjklzxcvbnm-+QWERTYUIOPASDFGHJKLZXCVBNM_()",errorMessage:"Type only numbers",validatorFunction:function(e){return(/^[+0-9]{1}[(0-9]{2}[0-9]{2}[)0-9]{2}[0-9]{4,7}$/.test(e.nodeLink.value)?/^[+0-9]{1}[(0-9]{2}[0-9]{2}[)0-9]{2}[0-9]{4,7}$/:/\S+\@\S+\.[a-z]+/i).test(e.nodeLink.value)},keypressValidatorFunction:!1}},ShowErrorMsg:t.ShowErrorMsg||!1,PrettyPrintErrors:t.PrettyPrintErrors||!0,EnableAnimations:t.EnableAnimations||!0,DeactivateSubmit:t.DeactivateSubmit||!0,FormInvalidClass:t.FormInvalidClass||!0,CancelButton:t.CancelButton||".cancel",CancelErrorMsg:t.CancelErrorMsg||!1,PositiveValidation:t.PositiveValidation||!0,LeaveUnvalidHighlights:t.LeaveUnvalidHighlights||!1},t.Validators)t.Validators.hasOwnProperty(n)&&(this.options.Validators[n]=t.Validators[n]);this.valid=!1,this.nodeLink=e,this.updateFields(),MutationObserver&&new MutationObserver(function(e){var t=!1;e.forEach(function(e){"childList"===e.type&&e.target.classList[0]!==y&&(t=!0)}),t&&o.updateFields()}).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}return a(r,[{key:"pushError",value:function(t){var n=!0;if(this.errorStack.emptyErrors.concat(this.errorStack.validationErrors.concat(this.errorStack.emptyCheckboxes)).forEach(function(e){t.message===e.message&&(n=!1)}),n)switch(t.type){case 101:this.errorStack.emptyErrors.push(t);break;case 102:this.errorStack.emptyCheckboxes.push(t);break;case 100:this.errorStack.validationErrors.push(t);break;default:this.errorStack.emptyErrors.push(t)}}},{key:"clearErrors",value:function(){this.errorStack.emptyErrors=[],this.errorStack.validationErrors=[],this.errorStack.emptyCheckboxes=[]}},{key:"updateFields",value:function(){this.submit=this.nodeLink.querySelector('input[type="submit"]')||this.nodeLink.querySelector('button[type="submit"]')||document.querySelector('input[form="'.concat(this.nodeLink.id,'"]'))||document.querySelector('button[form="'.concat(this.nodeLink.id,'"]'))||this.nodeLink.querySelector("button"),this.fields=[];var t=this.nodeLink.id,n=i(this.nodeLink.querySelectorAll(k.map(function(e){return'input[type="'.concat(e,'"], input[type="').concat(e,'"][form="').concat(t,'"]')}).join(", ")+", select, textarea, "+'select[form="'.concat(this.nodeLink.id,'"]')));try{for(n.s();!(e=n.n()).done;){var e=e.value;this.fields.push(new h(e,this))}}catch(e){n.e(e)}finally{n.f()}}},{key:"getFieldsByGroup",value:function(t){return this.fields.filter(function(e){return e.dataOpts.group===t})}},{key:"validateGroupWithOperator",value:function(e,t){var n=this.getFieldsByGroup(e),o=!1;switch(t){case"or":n.forEach(function(e){e.validate(!0)&&(o=!0)});break;case"and":o=!0,n.forEach(function(e){e.validate(!0)||(o=!1)});break;default:o=!0,n.forEach(function(e){e.validate(!0)||(o=!1)})}return o}},{key:"validate",value:function(){var e=this;e.clearErrors(),e.valid=!0;var t=i(e.fields);try{for(t.s();!(n=t.n()).done;){var n=n.value;n.validate()||(e.valid=!1,e.pushError(new l(n)))}}catch(e){t.e(e)}finally{t.f()}return e.valid}},{key:"updateState",value:function(){var e=this;if(e.validate())try{e.nodeLink.querySelector(".".concat(y)).innerHTML="",e.options.FormInvalidClass&&e.nodeLink.classList.remove(p),e.options.DeactivateSubmit&&(e.submit.parentElement.classList.remove(m),e.submit.removeAttribute("disabled"))}catch(e){console.log("(Error) in autoforms: ".concat(e.message))}else{if(e.options.PrettyPrintErrors)try{e.nodeLink.querySelector(".".concat(y)).innerHTML="".concat(0<e.errorStack.emptyErrors.length?'<div class="empty-errors">\n                                            <div class="title">The following fields is empty:</div>\n                                            <div class="error-list">\n                                                '.concat(e.errorStack.emptyErrors.map(function(e){return'<span class="error-message">'.concat(e.field.dataOpts.name||e.field.nodeLink.name,"</span>")}).join(""),"\n                                            </div>\n                                         </div>"):"","\n                    ").concat(0<e.errorStack.validationErrors.length?'<div class="validation-errors">\n                                        <div class="title">Check the correctness of the fields:</div>\n                                        <div class="error-list">\n                                            '.concat(e.errorStack.validationErrors.map(function(e){return'<span class="error-message">'.concat(e.field.dataOpts.name||e.field.nodeLink.name,"</span>")}).join(""),"\n                                        </div>\n                                     </div>"):"","\n                    ").concat(0<e.errorStack.emptyCheckboxes.length?'<div class="empty-checkboxes-errors">\n                                        <div class="title">Check the checkboxes:</div>\n                                        <div class="error-list">\n                                            '.concat(e.errorStack.emptyCheckboxes.map(function(e){return'<span class="error-message">'.concat(e.field.dataOpts.name||e.field.nodeLink.name,"</span>")}).join(""),"\n                                        </div>\n                                     </div>"):"")}catch(e){console.log("(Error) in autoforms: ".concat(e.message))}else try{e.nodeLink.querySelector(".".concat(y)).innerHTML=e.errorStack.emptyErrors.concat(e.errorStack.validationErrors.concat(e.errorStack.emptyCheckboxes)).map(function(e){return'<span class="error-message">'.concat(e.message,"</span><br>")}).join("")}catch(e){console.log("(Error) in autoforms: ".concat(e.message))}e.options.FormInvalidClass&&e.nodeLink.classList.add(p),e.options.DeactivateSubmit&&(e.submit.parentElement.classList.add(m),e.submit.setAttribute("disabled","disabled"))}}},{key:"initEvents",value:function(){var e=this;e.submit.parentNode.addEventListener("mouseenter",function(){e.highlightInvalidFields("on"),e.nodeLink.classList.contains(f)||e.nodeLink.classList.add(f)}),e.submit.parentNode.addEventListener("mouseleave",function(){e.options.LeaveUnvalidHighlights||e.highlightInvalidFields("off"),e.options.ShowErrorMsg&&(e.options.EnableAnimations?e.nodeLink.getElementById(v).style.opacity=0:e.nodeLink.getElementById(v).innerHTML="")}),e.valid?(e.options.FormInvalidClass&&e.nodeLink.classList.remove(p),e.options.DeactivateSubmit&&(e.submit.parentNode.classList.remove(m),e.submit.attributes.disabled&&e.submit.removeAttribute("disabled"))):(e.options.FormInvalidClass&&e.nodeLink.classList.remove(p),e.options.DeactivateSubmit&&(e.submit.parentNode.classList.add(m),e.submit.setAttribute("disabled","disabled"))),e.options.CancelErrorMsg&&(document.querySelector(e.options.CancelButton).addEventListener("mouseenter",function(){e.errorString="Будут отменены все изменения!"}),document.querySelector(e.options.CancelButton).addEventListener("mouseleave",function(){e.errorString="",e.options.EnableAnimations?document.getElementById(v).style.opacity=0:document.getElementById(v).innerHTML=""}))}},{key:"highlightInvalidFields",value:function(e){var t=i(this.fields);try{for(t.s();!(n=t.n()).done;){var n=n.value;"off"!==e&&(n.validate()?n.nodeLink.classList.remove(u):n.nodeLink.classList.add(u)),"off"===e&&n.nodeLink.classList.remove(u)}}catch(e){t.e(e)}finally{t.f()}}}]),r}();d={widgets:{},init:function(e,t){var n;e?(n=(e.className+e.id).toLowerCase().replace(new RegExp("[^[a-zA-Z0-9]]*","g"),"_"),t=t||{},(e.autoform=this.widgets[n]=new L(e,t)).initEvents()):console.error("Error: trying to init autoforms on undefined node")}},"function"==typeof define&&define.amd?define([],d):"object"===(void 0===t?"undefined":o(t))&&t.exports?t.exports=d:(void 0).returnExports=d},{}],3:[function(e,t,n){"use strict";t.exports=function(){var e=document.querySelector(".header--main"),t=e.offsetHeight;e&&window.addEventListener("scroll",function(){console.log(window.pageYOffset),130<=e.offsetHeight&&(e.style.height="".concat(t-window.pageYOffset,"px")),130===e.offsetHeight?e.classList.add("header--sticky"):e.classList.remove("header--sticky")})}},{}],4:[function(e,t,n){"use strict";t.exports=function(){var e,n,t,o="overflow-h",r=document.querySelector(".js-popup");r&&(e=document.querySelector(".js-open-popup"),n=r.querySelector(".js-close-popup"),t=function e(t){t.preventDefault(),document.body.classList.remove(o),r.classList.remove("show"),n.removeEventListener("click",e)},e.addEventListener("click",function(e){e.preventDefault(),document.body.classList.add(o),r.classList.add("show"),n.addEventListener("click",t)}))}},{}]},{},[1]);
//# sourceMappingURL=script.min.js.map
